import{x as A,y as B,aj as C,r as g,j as e,B as s,T as v,ag as w,ai as O,a5 as p,I as i,af as F,a as D,aa as P,E as S,aN as N,bc as $,P as R,ah as z}from"./index-wQ8JwfM2.js";import{T as L,a as I}from"./Table-cDawzk-H.js";import{a as T}from"./index-k6g5FF0C.js";import"./KeyboardArrowRight-yT4WKBtg.js";import"./index-owcxqeif.js";import"./Stack-xq_Pr2sx.js";const E=A().shape({name:B().matches(/^[a-zA-ZàáãạảăắằẳẵặâấầẩẫậèéẹẻẽêềếểễệđìíĩỉịòóõọỏôốồổỗộơớờởỡợùúũụủưứừửữựỳỵỷỹýÀÁÃẠẢĂẮẰẲẴẶÂẤẦẨẪẬÈÉẸẺẼÊỀẾỂỄỆĐÌÍĨỈỊÒÓÕỌỎÔỐỒỔỖỘƠỚỜỞỠỢÙÚŨỤỦƯỨỪỬỮỰỲỴỶỸÝ\s]+$/,"Tên chuyên ngành chỉ bao gồm chữ cái in hoa và in thường.")});function Y(r){const{onClose:n,open:d}=r,{onCreateMajor:c}=C(),{mutate:h,isSuccess:m}=c(),t=a=>{h(a)};return g.useEffect(()=>{n()},[m]),e.jsx(T,{open:d,onClose:n,children:e.jsxs(s,{p:10,children:[e.jsx(v,{mb:10,textTransform:"uppercase",children:"Tạo Chuyên ngành"}),e.jsx(w,{validationSchema:E,initialValues:{name:""},onSubmit:a=>t(a),children:({values:a,errors:o,handleSubmit:j,handleChange:f,handleBlur:u})=>e.jsxs("form",{onSubmit:j,children:[e.jsx(O,{label:"Tên chuyên ngành",name:"name",value:a.name,placeholder:"Nhập vào tên chuyên ngành",onChange:f,onBlur:u,error:!!o.name,helperText:`${o.name?o.name:""}`}),e.jsxs(s,{mt:10,justifyContent:"end",gap:4,display:"flex",children:[e.jsxs(p,{variant:"contained",color:"primary",onClick:n,children:[e.jsx(i,{icon:"mdi:close-outline"}),"Hủy"]}),e.jsxs(p,{variant:"contained",color:"success",type:"submit",children:[e.jsx(i,{icon:"material-symbols:save-outline"}),"Lưu thông tin"]})]})]})})]})})}function H(r){var y;const{onClose:n,open:d,majorId:c}=r,{handleGetMajorById:h,onUpdateMajor:m}=C(),{data:t,isLoading:a,isFetching:o}=h(c),{mutate:j,isSuccess:f}=m(c),u=x=>{j(x)};return g.useEffect(()=>{n()},[f]),e.jsx(T,{maxWidth:"xs",open:d,onClose:n,children:e.jsxs(s,{p:10,children:[e.jsx(v,{mb:10,variant:"h4",textTransform:"uppercase",children:"Cập nhật thông tin Chuyên ngành"}),a||o?e.jsx(s,{m:"auto",height:300,children:e.jsx(F,{})}):e.jsx(w,{validationSchema:E,initialValues:{name:`${(y=t==null?void 0:t.major)==null?void 0:y.name}`},onSubmit:x=>u(x),children:({values:x,errors:M,handleSubmit:b,handleChange:l,handleBlur:k})=>e.jsxs("form",{onSubmit:b,children:[e.jsx(O,{label:"Tên chuyên ngành",name:"name",value:x.name,placeholder:"Nhập vào tên chuyên ngành",onChange:l,onBlur:k,error:!!M.name,helperText:`${M.name?M.name:""}`}),e.jsxs(s,{mt:10,justifyContent:"end",gap:4,display:"flex",children:[e.jsxs(p,{variant:"contained",color:"primary",onClick:n,children:[e.jsx(i,{icon:"mdi:close-outline"}),"Hủy"]}),e.jsxs(p,{variant:"contained",color:"success",type:"submit",children:[e.jsx(i,{icon:"material-symbols:save-outline"}),"Lưu thông tin"]})]})]})})]})})}function G(r){const{onClose:n,open:d,majorId:c}=r,{onDeleteMajor:h}=C(),{mutate:m,isSuccess:t}=h(c),a=()=>{m()};return g.useEffect(()=>{n()},[t]),e.jsx(T,{onClose:n,open:d,children:e.jsxs(s,{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:10,py:12,children:[e.jsxs(s,{borderRadius:"50%",padding:3,sx:{background:"rgba(255,49,111,0.2)"},children:[e.jsx(i,{color:"#b31d1d82",height:70,width:70,icon:"fa-solid:trash-restore"})," "]}),e.jsx(D,{variant:"h3",mt:10,mb:14,children:"Bạn có chắc chắn muốn xóa chuyên ngành này ?"}),e.jsxs(s,{width:"100%",display:"flex",gap:6,marginTop:1,children:[e.jsxs(p,{onClick:n,sx:{width:"50%"},color:"primary",variant:"contained",children:[e.jsx(i,{width:20,style:{marginRight:4},icon:"mdi:cancel-outline"}),"Hủy"]}),e.jsxs(p,{onClick:a,sx:{width:"50%"},color:"error",variant:"contained",children:[e.jsx(i,{width:20,style:{marginRight:4},icon:"material-symbols:auto-delete-outline"}),"Xóa chuyên ngành"]})]})]})})}function U(r){const{rows:n,totalItems:d,totalPages:c,page:h,handelChangePage:m,...t}=r,[a,o]=g.useState({isOpen:!1,majorId:0}),j=()=>{o({...a,isOpen:!1})},f=l=>{o({majorId:l,isOpen:!0})},[u,y]=g.useState({isOpen:!1,majorId:0}),x=()=>{y({...u,isOpen:!1})},M=l=>{y({majorId:l,isOpen:!0})},b=[{headerName:"Tên Chuyên ngành",field:"name",flex:1.4,headerAlign:"center",align:"center"},{headerName:"Ngày Tạo",field:"startDate",flex:2,headerAlign:"center",align:"center",renderCell:l=>e.jsx(e.Fragment,{children:e.jsx(D,{children:P(l.row.created_at).format("DD/MM/YYYY")})})},{headerName:"",field:"name9",flex:1,headerAlign:"center",align:"center",renderCell:l=>e.jsxs(s,{display:"flex",gap:6,children:[e.jsx(I,{title:"Cập nhật thông tin chuyên ngành",children:e.jsx(S,{onClick:()=>{f(l.row.id)},size:"small",children:e.jsx(i,{icon:"lucide:edit"})})}),e.jsx(I,{title:"Xóa chuyên ngành",children:e.jsx(S,{onClick:()=>{M(l.row.id)},size:"small",children:e.jsx(i,{icon:"ic:baseline-delete"})})})]})}];return e.jsxs(s,{...t,children:[" ",e.jsx(L,{rows:n,sx:{bgcolor:"white",height:500},columns:b,totalItems:1,totalPages:1,page:1,handleChangePage:()=>{},disableColumnMenu:!0,disableColumnFilter:!0,disableColumnSelector:!0}),e.jsx(H,{onClose:j,open:a.isOpen,majorId:a.majorId}),e.jsx(G,{onClose:x,open:u.isOpen,majorId:u.majorId})]})}function J(){const{handleGetAllMajorsRender:r}=C(),{data:n,isLoading:d,isSuccess:c,isFetching:h}=r(),m=N();c&&m($(n.majors));const[t,a]=g.useState(!1),o=()=>{a(!0)},j=()=>{a(!1)};return e.jsx(e.Fragment,{children:e.jsxs(R,{sx:{py:10,px:10},elevation:1,children:[e.jsxs(s,{display:"flex",justifyContent:"space-between",children:[e.jsx(v,{mb:4,mt:2,children:"Danh sách tất cả Chuyên ngành"}),e.jsxs(p,{onClick:o,color:"error",variant:"contained",size:"small",children:[e.jsx(i,{width:16,icon:"material-symbols:add"}),"Thêm chuyên ngành"," "]})]}),d||h?e.jsx(z,{}):e.jsx(s,{width:"full",my:4,children:e.jsx(U,{rows:n==null?void 0:n.majors})}),e.jsx(e.Fragment,{children:e.jsx(Y,{open:t,onClose:j})})]})})}export{J as default};
