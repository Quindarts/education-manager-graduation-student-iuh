import{aw as n,ao as A,aM as F,aj as T,aN as j,ax as v,ay as p,b8 as w,az as a}from"./index-NapbxlsL.js";import{Q as P}from"./useQueryGroupLecturer-YqNk0Zqv.js";import{u as Q}from"./useParams-vd7i9Ic6.js";const $=(e,s,u,i,o)=>{let g=i||"username",d=o||"";return n.get(`/api/v1/lecturers/query?searchField=${g}&keywords=${d}&limit=${s}&page=${u}&majorId=${e}`)},b=e=>n.get(`/api/v1/lecturers/${e}`),q=e=>n.post("/api/v1/lecturers",e),M=(e,s)=>n.put(`/api/v1/lecturers/${e}`,s),f=e=>n.delete(`/api/v1/lecturers/${e}`);var C=(e=>(e.getAllLecturer="getAllLecturer",e.createLecturer="createLecturer",e.getLecturerById="getLecturerById",e.searchLecturerByField="searchLecturerByField",e))(C||{});const E=()=>{const{enqueueSnackbar:e}=A(),s=F(t=>t.lecturerSlice),{me:u,currentRoleRender:i,renderUi:o,paramTotalPage:g}=s,{majorStore:d}=T(),{getQueryField:r,setTotalPage:h}=Q(),c=d.currentMajor.id,m=j(),y=()=>v(["getAllLecturer",c,r("limit"),r("page"),r("searchField"),r("keywords")],()=>$(c,r("limit"),r("page"),r("searchField"),r("keywords")),{onSuccess(t){const l=t.params?t.params.totalPage:0;h(l),m(w(l))},staleTime:1e3*(60*10),refetchInterval:1e3*(60*20),keepPreviousData:!0}),L=t=>v(["getLecturerById",t],()=>b(t),{enabled:!!t,cacheTime:1e3*(60*1)}),I=()=>p(t=>q(t),{onSuccess(){e("Tạo giang vien thành công",{variant:"success"}),a.invalidateQueries(["getAllLecturer",c,r("limit"),r("page"),r("searchField"),r("keywords")])},onError(){e("Tạo giảng vien thất bại",{variant:"error"})}}),S=t=>{const l=t||u.user.id;return p(k=>M(l,k),{onSuccess(){e("Cập nhật giảng viên thành công",{variant:"success"}),a.invalidateQueries(["getAllLecturer",c,r("limit"),r("page"),r("searchField"),r("keywords")]),a.invalidateQueries({queryKey:["get-me"]}),a.invalidateQueries({queryKey:["getLecturerById",t]}),a.invalidateQueries({queryKey:[P.getAllGroupLecturerByTypeGroup,"reviewer"]})},onError(){e("Cập nhật giảng viên thất bại vui lòng thử lại sau",{variant:"error"})}})},B=()=>p(t=>f(t),{onSuccess(){e("Xóa giảng viên thành công",{variant:"success"}),a.invalidateQueries(["getAllLecturer",c,r("limit"),1,r("searchField"),r("keywords")])},onError(){e("Xóa giảng viên thất bại vui lòng thử lại sau",{variant:"error"})}});return{me:u,currentRoleRender:i,renderUi:o,paramTotalPage:g.lecturerMajor,onCreateLecturer:I,onDeleteLecturer:B,onUpdateLecturer:S,handleGetLecturerById:L,handleGetAllLecturer:y}};export{C as Q,E as u};
