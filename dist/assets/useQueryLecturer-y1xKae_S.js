import{aw as i,ao as k,aM as F,aj as f,ad as j,aN as w,ax as L,ay as p,b8 as $,az as a}from"./index-wQ8JwfM2.js";import{Q as b}from"./useQueryGroupLecturer-Sp-7QLMU.js";import{u as q,Q as y}from"./useQueryLecturerTerm-QglJ35an.js";const M=(e,s,u,o,l)=>{let d=o||"username",m=l||"";return i.get(`/api/v1/lecturers/query?searchField=${d}&keywords=${m}&limit=${s}&page=${u}&majorId=${e}`)},G=e=>i.get(`/api/v1/lecturers/${e}`),C=e=>i.post("/api/v1/lecturers",e),x=(e,s)=>i.put(`/api/v1/lecturers/${e}`,s),D=e=>i.delete(`/api/v1/lecturers/${e}`);var E=(e=>(e.getAllLecturer="getAllLecturer",e.createLecturer="createLecturer",e.getLecturerById="getLecturerById",e.searchLecturerByField="searchLecturerByField",e))(E||{});const X=()=>{const{enqueueSnackbar:e}=k(),s=F(t=>t.lecturerSlice),{me:u,currentRoleRender:o,renderUi:l,paramTotalPage:d}=s,{majorStore:m}=f(),{termStore:h}=j(),{getQueryField:r,setTotalPage:T}=q(),c=m.currentMajor.id,B=w(),v=h.currentTerm.id,I=()=>L(["getAllLecturer",c,r("limit"),r("page"),r("searchField"),r("keywords")],()=>M(c,r("limit"),r("page"),r("searchField"),r("keywords")),{onSuccess(t){const n=t.params?t.params.totalPage:0;T(n),B($(n))},staleTime:1e3*(60*10),refetchInterval:1e3*(60*20),keepPreviousData:!0}),Q=t=>L(["getLecturerById",t],()=>G(t),{enabled:!!t,cacheTime:1e3*(60*1)}),S=()=>p(t=>C(t),{onSuccess(){e("Tạo giang vien thành công",{variant:"success"}),a.invalidateQueries(["getAllLecturer",c,r("limit"),r("page"),r("searchField"),r("keywords")]),a.invalidateQueries([y.getAllLectuerTermByParams,v,"10","1","",""])},onError(t){t.status<500?e(t.message,{variant:"error"}):e("Tạo giảng vien thất bại",{variant:"error"})}}),A=t=>{const n=t||u.user.id;return p(g=>x(n,g),{onSuccess(){e("Cập nhật giảng viên thành công",{variant:"success"}),a.invalidateQueries(["getAllLecturer",c,r("limit"),r("page"),r("searchField"),r("keywords")]),n===u.user.id&&a.invalidateQueries({queryKey:["get-me"]}),a.invalidateQueries({queryKey:["getLecturerById",t]}),a.invalidateQueries({queryKey:[b.getAllGroupLecturerByTypeGroup,"reviewer"]}),a.invalidateQueries([y.getAllLectuerTermByParams,v,"10","1","",""])},onError(g){g.status<500?e(g.message,{variant:"error"}):e("Tạo giảng vien thất bại",{variant:"error"})}})},P=()=>p(t=>D(t),{onSuccess(){e("Xóa giảng viên thành công",{variant:"success"}),a.invalidateQueries(["getAllLecturer",c,r("limit"),1,r("searchField"),r("keywords")]),a.invalidateQueries([y.getAllLectuerTermByParams,v,"10","1","",""])},onError(){e("Xóa giảng viên thất bại vui lòng thử lại sau",{variant:"error"})}});return{me:u,currentRoleRender:o,renderUi:l,paramTotalPage:d.lecturerMajor,onCreateLecturer:S,onDeleteLecturer:P,onUpdateLecturer:A,handleGetLecturerById:Q,handleGetAllLecturer:I}};export{E as Q,X as u};
