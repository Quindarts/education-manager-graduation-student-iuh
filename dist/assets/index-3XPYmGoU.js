import{l as G,k as A,as as q,p as re,s as D,a as S,U as F,e as x,r as d,m as _,b as E,at as se,t as ae,j as n,n as P,o as B,D as J,au as ie,av as K,ao as Z,B as m,a5 as W,I as z,T as le,ah as ce,aw as ee,ad as pe,ax as de,ay as ue,az as he,ak as me,P as Q}from"./index-NapbxlsL.js";import{u as xe}from"./useQueryGroupLecturer-YqNk0Zqv.js";import{E as Y,t as ge}from"./groupLecturer.validation-KscKIZ_D.js";function be(e){return A("MuiLink",e)}const ve=G("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),fe=ve,te={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ye=e=>te[e]||e,Se=({theme:e,ownerState:t})=>{const r=ye(t.color),a=q(e,`palette.${r}`,!1)||t.color,i=q(e,`palette.${r}Channel`);return"vars"in e&&i?`rgba(${i} / 0.4)`:re(a,.4)},Ce=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],je=e=>{const{classes:t,component:r,focusVisible:a,underline:i}=e,s={root:["root",`underline${F(i)}`,r==="button"&&"button",a&&"focusVisible"]};return B(s,be,t)},Le=D(S,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`underline${F(r.underline)}`],r.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>x({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&x({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:Se({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${fe.focusVisible}`]:{outline:"auto"}})),Te=d.forwardRef(function(t,r){const a=_({props:t,name:"MuiLink"}),{className:i,color:s="primary",component:u="a",onBlur:c,onFocus:h,TypographyClasses:v,underline:p="always",variant:l="inherit",sx:g}=a,C=E(a,Ce),{isFocusVisibleRef:L,onBlur:j,onFocus:R,ref:o}=se(),[b,f]=d.useState(!1),M=ae(r,o),w=T=>{j(T),L.current===!1&&f(!1),c&&c(T)},N=T=>{R(T),L.current===!0&&f(!0),h&&h(T)},$=x({},a,{color:s,component:u,focusVisible:b,underline:p,variant:l}),y=je($);return n.jsx(Le,x({color:s,className:P(y.root,i),classes:v,component:u,onBlur:w,onFocus:N,ref:M,ownerState:$,variant:l,sx:[...Object.keys(te).includes(s)?[]:[{color:s}],...Array.isArray(g)?g:[g]]},C))}),Ne=Te,Re=d.createContext({}),U=Re,we=d.createContext({}),V=we;function $e(e){return A("MuiStep",e)}G("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const De=["active","children","className","component","completed","disabled","expanded","index","last"],Me=e=>{const{classes:t,orientation:r,alternativeLabel:a,completed:i}=e;return B({root:["root",r,a&&"alternativeLabel",i&&"completed"]},$e,t)},Ie=D("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>x({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),Pe=d.forwardRef(function(t,r){const a=_({props:t,name:"MuiStep"}),{active:i,children:s,className:u,component:c="div",completed:h,disabled:v,expanded:p=!1,index:l,last:g}=a,C=E(a,De),{activeStep:L,connector:j,alternativeLabel:R,orientation:o,nonLinear:b}=d.useContext(U);let[f=!1,M=!1,w=!1]=[i,h,v];L===l?f=i!==void 0?i:!0:!b&&L>l?M=h!==void 0?h:!0:!b&&L<l&&(w=v!==void 0?v:!0);const N=d.useMemo(()=>({index:l,last:g,expanded:p,icon:l+1,active:f,completed:M,disabled:w}),[l,g,p,f,M,w]),$=x({},a,{active:f,orientation:o,alternativeLabel:R,completed:M,disabled:w,expanded:p,component:c}),y=Me($),T=n.jsxs(Ie,x({as:c,className:P(y.root,u),ref:r,ownerState:$},C,{children:[j&&R&&l!==0?j:null,s]}));return n.jsx(V.Provider,{value:N,children:j&&!R&&l!==0?n.jsxs(d.Fragment,{children:[j,T]}):T})}),Ge=Pe,Ae=J(n.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),_e=J(n.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ee(e){return A("MuiStepIcon",e)}const Be=G("MuiStepIcon",["root","active","completed","error","text"]),k=Be;var X;const We=["active","className","completed","error","icon"],ze=e=>{const{classes:t,active:r,completed:a,error:i}=e;return B({root:["root",r&&"active",a&&"completed",i&&"error"],text:["text"]},Ee,t)},O=D(ie,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${k.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${k.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${k.error}`]:{color:(e.vars||e).palette.error.main}})),Ue=D("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),Fe=d.forwardRef(function(t,r){const a=_({props:t,name:"MuiStepIcon"}),{active:i=!1,className:s,completed:u=!1,error:c=!1,icon:h}=a,v=E(a,We),p=x({},a,{active:i,completed:u,error:c}),l=ze(p);if(typeof h=="number"||typeof h=="string"){const g=P(s,l.root);return c?n.jsx(O,x({as:_e,className:g,ref:r,ownerState:p},v)):u?n.jsx(O,x({as:Ae,className:g,ref:r,ownerState:p},v)):n.jsxs(O,x({className:g,ref:r,ownerState:p},v,{children:[X||(X=n.jsx("circle",{cx:"12",cy:"12",r:"12"})),n.jsx(Ue,{className:l.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:p,children:h})]}))}return h}),Ve=Fe;function ke(e){return A("MuiStepLabel",e)}const Oe=G("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),I=Oe,He=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],qe=e=>{const{classes:t,orientation:r,active:a,completed:i,error:s,disabled:u,alternativeLabel:c}=e;return B({root:["root",r,s&&"error",u&&"disabled",c&&"alternativeLabel"],label:["label",a&&"active",i&&"completed",s&&"error",u&&"disabled",c&&"alternativeLabel"],iconContainer:["iconContainer",a&&"active",i&&"completed",s&&"error",u&&"disabled",c&&"alternativeLabel"],labelContainer:["labelContainer",c&&"alternativeLabel"]},ke,t)},Qe=D("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation]]}})(({ownerState:e})=>x({display:"flex",alignItems:"center",[`&.${I.alternativeLabel}`]:{flexDirection:"column"},[`&.${I.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),Ye=D("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>x({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${I.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${I.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${I.alternativeLabel}`]:{marginTop:16},[`&.${I.error}`]:{color:(e.vars||e).palette.error.main}})),Xe=D("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${I.alternativeLabel}`]:{paddingRight:0}})),Je=D("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${I.alternativeLabel}`]:{textAlign:"center"}})),ne=d.forwardRef(function(t,r){var a;const i=_({props:t,name:"MuiStepLabel"}),{children:s,className:u,componentsProps:c={},error:h=!1,icon:v,optional:p,slotProps:l={},StepIconComponent:g,StepIconProps:C}=i,L=E(i,He),{alternativeLabel:j,orientation:R}=d.useContext(U),{active:o,disabled:b,completed:f,icon:M}=d.useContext(V),w=v||M;let N=g;w&&!N&&(N=Ve);const $=x({},i,{active:o,alternativeLabel:j,completed:f,disabled:b,error:h,orientation:R}),y=qe($),T=(a=l.label)!=null?a:c.label;return n.jsxs(Qe,x({className:P(y.root,u),ref:r,ownerState:$},L,{children:[w||N?n.jsx(Xe,{className:y.iconContainer,ownerState:$,children:n.jsx(N,x({completed:f,active:o,error:h,icon:w},C))}):null,n.jsxs(Je,{className:y.labelContainer,ownerState:$,children:[s?n.jsx(Ye,x({ownerState:$},T,{className:P(y.label,T==null?void 0:T.className),children:s})):null,p]})]}))});ne.muiName="StepLabel";const Ke=ne;function Ze(e){return A("MuiStepConnector",e)}G("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const et=["className"],tt=e=>{const{classes:t,orientation:r,alternativeLabel:a,active:i,completed:s,disabled:u}=e,c={root:["root",r,a&&"alternativeLabel",i&&"active",s&&"completed",u&&"disabled"],line:["line",`line${F(r)}`]};return B(c,Ze,t)},nt=D("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>x({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),ot=D("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.line,t[`line${F(r.orientation)}`]]}})(({ownerState:e,theme:t})=>{const r=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return x({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:r},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),rt=d.forwardRef(function(t,r){const a=_({props:t,name:"MuiStepConnector"}),{className:i}=a,s=E(a,et),{alternativeLabel:u,orientation:c="horizontal"}=d.useContext(U),{active:h,disabled:v,completed:p}=d.useContext(V),l=x({},a,{alternativeLabel:u,orientation:c,active:h,completed:p,disabled:v}),g=tt(l);return n.jsx(nt,x({className:P(g.root,i),ref:r,ownerState:l},s,{children:n.jsx(ot,{className:g.line,ownerState:l})}))}),st=rt;function at(e){return A("MuiStepContent",e)}G("MuiStepContent",["root","last","transition"]);const it=["children","className","TransitionComponent","transitionDuration","TransitionProps"],lt=e=>{const{classes:t,last:r}=e;return B({root:["root",r&&"last"],transition:["transition"]},at,t)},ct=D("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.last&&t.last]}})(({ownerState:e,theme:t})=>x({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),pt=D(K,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),dt=d.forwardRef(function(t,r){const a=_({props:t,name:"MuiStepContent"}),{children:i,className:s,TransitionComponent:u=K,transitionDuration:c="auto",TransitionProps:h}=a,v=E(a,it);d.useContext(U);const{active:p,last:l,expanded:g}=d.useContext(V),C=x({},a,{last:l}),L=lt(C);let j=c;return c==="auto"&&!u.muiSupportAuto&&(j=void 0),n.jsx(ct,x({className:P(L.root,s),ref:r,ownerState:C},v,{children:n.jsx(pt,x({as:u,in:p||g,className:L.transition,ownerState:C,timeout:j,unmountOnExit:!0},h,{children:i}))}))}),ut=dt;function ht(e){return A("MuiStepper",e)}G("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const mt=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],xt=e=>{const{orientation:t,alternativeLabel:r,classes:a}=e;return B({root:["root",t,r&&"alternativeLabel"]},ht,a)},gt=D("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel]}})(({ownerState:e})=>x({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),bt=n.jsx(st,{}),vt=d.forwardRef(function(t,r){const a=_({props:t,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:s=!1,children:u,className:c,component:h="div",connector:v=bt,nonLinear:p=!1,orientation:l="horizontal"}=a,g=E(a,mt),C=x({},a,{alternativeLabel:s,orientation:l,component:h}),L=xt(C),j=d.Children.toArray(u).filter(Boolean),R=j.map((b,f)=>d.cloneElement(b,x({index:f,last:f+1===j.length},b.props))),o=d.useMemo(()=>({activeStep:i,alternativeLabel:s,connector:v,nonLinear:p,orientation:l}),[i,s,v,p,l]);return n.jsx(U.Provider,{value:o,children:n.jsx(gt,x({as:h,ownerState:C,className:P(L.root,c),ref:r},g,{children:R}))})}),ft=vt,yt=(e,t)=>{if(e!=null){const r=e==null?void 0:e.members.map(i=>i.id);return t.map(i=>i.lecturerId).filter(i=>r.includes(i)).length>0}return!1},St=e=>e?e.map(t=>({...t,status:"no_group"})):[];function Ct(e){var R;const{team:t,typeGroupLecturer:r,handleGroupStudentHavedAssign:a,groupStudents:i}=e,[s,u]=d.useState([]);d.useEffect(()=>{u(St(i))},[i]);let c=s==null?void 0:s.filter(o=>o.status==="have_group"),h=s==null?void 0:s.filter(o=>o.status==="no_group");d.useEffect(()=>{a(c.map(o=>o))},[s]);const{enqueueSnackbar:v}=Z();d.useEffect(()=>{let o=s==null?void 0:s.filter(b=>b.status==="have_group");yt(t,o)===!0&&v("Giảng viên hướng dẫn không được chấm phản biện",{variant:"error"})},[s]);const p=o=>{o.currentTarget.classList.add("dragged"),o.dataTransfer.setData("text/plain",o.currentTarget.id),o.dataTransfer.effectAllowed="move"},l=o=>{o.currentTarget.classList.remove("dragged")},g=o=>{o.preventDefault(),o.currentTarget.classList.add("dragged-over"),o.dataTransfer.dropEffect="move"},C=o=>{let b=o.currentTarget,f=o.relatedTarget;if(f.parentNode===b||f===b)return;o.preventDefault(),o.currentTarget.classList.remove("dragged-over")},L=o=>{o.preventDefault(),o.dataTransfer.dropEffect="move"},j=(o,b,f)=>{o.preventDefault(),o.currentTarget.classList.remove("dragged-over");let M=o.dataTransfer.getData("text/plain"),w=s==null?void 0:s.map(N=>(N.id.toString()===M.toString()&&(N.status=f),N));u(w)};return n.jsx(m,{position:"relative",sx:{bgcolor:"white",minHeight:"80vh",p:10,borderRadius:4},children:n.jsxs(m,{className:"container",width:"full",display:"flex",gap:20,children:[n.jsxs(m,{flex:1,children:[n.jsxs(m,{alignItems:"center",gap:6,display:"flex",children:[n.jsx(S,{variant:"h5",fontWeight:"500",color:"primary.main",children:"Danh sách nhóm sinh viên chưa được phân"}),n.jsxs(W,{color:"success",children:[n.jsx(z,{width:20,icon:"fluent:filter-12-filled"}),"Filter"]})]}),n.jsxs(m,{onDragLeave:o=>C(o),onDragEnter:o=>g(o),onDragEnd:o=>l(o),onDragOver:o=>L(o),onDrop:o=>j(o,!1,"no_group"),pr:20,borderRight:"1px solid #0052b1 ",sx:{overflowY:"auto","&::-webkit-scrollbar":{width:4},".MuiPaper-root":{pl:8,pr:8,py:0},"&::-webkit-scrollbar-thumb":{borderRadius:10,width:20,bgcolor:"grey.400",color:"grey.400"}},height:"80vh",children:[n.jsx(m,{className:"",children:h.map((o,b)=>n.jsx(m,{sx:{bgcolor:"grey.100",borderRadius:2,p:4,color:"white",my:4,cursor:"pointer",border:"2px solid #f2f2f2","&:hover":{border:"2px solid #2acf8a",boxShadow:"0 10px 20px rgba(166, 165, 165, 0.3), 0 6px 6px rgba(235, 235, 235, 0.23)",bgcolor:"#e8fef5",transition:"0.2s ease-in"}},id:o.id,draggable:!0,onDragStart:f=>p(f),onDragEnd:f=>p(f),children:n.jsxs(m,{children:[n.jsx(S,{variant:"body1",color:"primary.main",fontWeight:"500",children:o==null?void 0:o.name}),n.jsxs(S,{variant:"body1",color:"primary.dark",fontWeight:"500",children:[n.jsxs("span",{children:["Tên Đề tài : ","  "]}),o==null?void 0:o.topicName]}),n.jsxs(S,{variant:"body1",color:"primary.dark",fontWeight:"500",children:[n.jsxs("span",{children:["Giảng viên hướng dẫn : ","  "]}),o==null?void 0:o.fullName]})]})},o.id))}),n.jsx(m,{mb:6,mt:14,pt:10,borderTop:"1px solid #56bae8",children:n.jsxs(S,{variant:"body1",color:"primary.main",fontWeight:"500",children:["Số lượng : ","      ",n.jsxs("span",{style:{color:"black"},children:[" ",h.length]})]})})]})]}),n.jsxs(m,{flex:1,children:[n.jsxs(m,{justifyContent:"space-between",display:"flex",mb:10,children:[n.jsx(S,{variant:"h4",fontWeight:"500",color:"error.main",children:"Nhóm giảng viên"}),n.jsxs(m,{children:[n.jsxs(S,{variant:"body1",fontWeight:"600",color:"primary.main",children:["Nhóm chấm : ",t.name]}),(R=t==null?void 0:t.members)==null?void 0:R.map((o,b)=>n.jsxs(S,{variant:"body2",fontWeight:"500",color:"primary.main",children:["GV ",b+1,": ",o.fullName]}))]})]}),n.jsx(m,{sx:{overflowY:"auto","&::-webkit-scrollbar":{width:4},".MuiPaper-root":{pl:8,pr:8,py:0},"&::-webkit-scrollbar-thumb":{borderRadius:10,width:20,bgcolor:"grey.400",color:"grey.400"}},height:"50vh",flex:1,onDragLeave:o=>C(o),onDragEnter:o=>g(o),onDragEnd:o=>l(o),onDragOver:o=>L(o),onDrop:o=>j(o,!1,"have_group"),children:n.jsx(m,{className:"drag_container",children:n.jsx(m,{className:"container",children:n.jsx(m,{className:"drag_column",children:n.jsx(m,{className:"drag_row",children:c==null?void 0:c.map(o=>n.jsx(m,{sx:{bgcolor:"grey.100",borderRadius:2,p:4,color:"white",my:4,cursor:"pointer",border:"2px solid #fefefe","&:hover":{border:"2px solid #f97979",boxShadow:"0 10px 20px rgba(166, 165, 165, 0.3), 0 6px 6px rgba(235, 235, 235, 0.23)",bgcolor:"#fdf9f9",transition:"0.2s ease-in"}},id:o.id,draggable:!0,onDragStart:b=>p(b),onDragEnd:b=>p(b),children:n.jsx(m,{gap:20,position:"relative",alignItems:"center",display:"flex",children:n.jsxs(m,{children:[n.jsx(S,{variant:"body1",color:"primary.main",fontWeight:"500",children:o==null?void 0:o.name}),n.jsxs(S,{variant:"body1",color:"primary.dark",fontWeight:"500",children:[n.jsxs("span",{children:["Tên Đề tài : ","  "]}),o==null?void 0:o.topicName]}),n.jsxs(S,{variant:"body1",color:"primary.dark",fontWeight:"500",children:[n.jsxs("span",{children:["Giảng viên hướng dẫn : ","  "]}),o==null?void 0:o.fullName]})]})})},o.id))})})})})}),n.jsx(m,{mb:6,mt:14,pt:10,width:"full",justifyItems:"space-between",display:"flex",borderTop:"1px solid #56bae8",children:n.jsxs(S,{flex:1,variant:"body1",color:"primary.main",fontWeight:"500",children:["Số lượng : ","      ",n.jsxs("span",{style:{color:"black"},children:[" ",c.length]})]})})]})]})})}const jt=e=>{switch(e){case"report_poster":return"Chấm Poster";case"reviewer":return"Chấm Phản biện";case"report_council":return"Chấm Hội đồng"}};function Lt(e){const{setCurrentTeam:t,checkedTyper:r}=e,[a,i]=d.useState(),s=(p,l)=>{i(p),t({id:l.groupLecturerId,team:l})},{handleGetAllGroupLecturerByTypeGroup:u}=xe(),{data:c,isLoading:h,isFetching:v}=u(r);return n.jsxs(m,{my:10,borderRadius:4,bgcolor:"white",py:16,px:8,children:[n.jsx(m,{children:n.jsxs(le,{variant:"body1",sx:{mb:4},children:["Danh sách nhóm giảng viên ",jt(r)," "]})}),h||v?n.jsx(ce,{}):n.jsx(m,{display:"flex",flexWrap:"wrap",p:4,gap:10,children:c==null?void 0:c.groupLecturers.map((p,l)=>n.jsxs(m,{p:4,position:"relative",onClick:()=>s(l,p),height:120,sx:{cursor:"pointer"},border:`${l===a&&"2px solid #2acf8a"}`,borderRadius:2,bgcolor:l!==a?"grey.200":"#d0ffeb",width:"calc(25%  - 16px)",children:[n.jsx(S,{color:"primary.dark",children:p.name}),p.members.map((g,C)=>n.jsx(n.Fragment,{children:n.jsxs(S,{variant:"body2",children:["GV ",C+1,": ",g.fullName]})})),n.jsx(S,{children:n.jsx(Ne,{bottom:10,right:10,color:"grey.600",position:"absolute",children:"Xem chi tiết"})})]}))})]})}const Tt=async(e,t)=>ee.post(`/api/v1/assigns/type-evaluation/${e}`,t),Nt=async(e,t)=>ee.get(`/api/v1/assigns/type-evaluation/${e}/group-student/no-assign?termId=${t}`),Rt=()=>{const{enqueueSnackbar:e}=Z(),{termStore:t}=pe();return{handletGetGroupStudentNoAssignByType:i=>de(["getGroupStudentNoAssignByType",i,t.currentTerm.id],()=>Nt(i,t.currentTerm.id)),onCreateAssignByType:i=>ue(s=>Tt(i,s),{onSuccess(){e("Phân công chấm điểm thành công",{variant:"success"}),he.invalidateQueries(["getGroupStudentNoAssignByType",i,t.currentTerm.id])},onError(s){e(s.message,{variant:"error"})}})}};function Mt(){var $;const e=[0,1,2,3,4,5,6,7,8,9,10,11,12],[t,r]=d.useState({id:"",team:{}}),[a,i]=d.useState([]),[s,u]=d.useState(0),c=y=>{i(y)},h=()=>{u(y=>y+1)},v=()=>{u(y=>y-1)},p=()=>{r({id:"",team:{}}),i([]),u(0)},[l,g]=d.useState(($=Y[0])==null?void 0:$._id),{onCreateAssignByType:C,handletGetGroupStudentNoAssignByType:L}=Rt(),{mutate:j,isSuccess:R}=C(l),{data:o,isSuccess:b,isLoading:f,isFetching:M}=L(l),w=()=>{j({groupLecturerId:t.id,listGroupStudentId:a.map(y=>y.id)})};d.useEffect(()=>{s===2&&R===!0&&h()},[R]);const N=[{label:n.jsx(me,{label:"Chọn loại nhóm phân công chấm điểm",value:l,options:Y,disabled:s!==0,onChange:y=>{g(y.target.value)}}),description:n.jsx(Lt,{checkedTyper:l,setCurrentTeam:r,listGroupStudent:e})},{label:"Phân công nhóm giảng viên vừa chọn để chấm đề tài",description:n.jsx(Ct,{groupStudents:o==null?void 0:o.groupStudent,typeGroupLecturer:l,handleGroupStudentHavedAssign:c,team:t.team})},{label:`Thông tin phân công ${ge(l)}`}];return n.jsx(Q,{sx:{py:10,px:10},elevation:1,children:n.jsxs(m,{sx:{maxWidth:"full"},children:[n.jsx(ft,{activeStep:s,orientation:"vertical",children:N.map((y,T)=>{var H;return n.jsxs(Ge,{children:[n.jsx(Ke,{sx:{fontSize:14,color:"primay.dark"},optional:T===2?n.jsxs(m,{children:[n.jsxs(S,{my:4,variant:"body2",color:"primary",children:["Nhóm giảng viên: ",(H=t==null?void 0:t.team)==null?void 0:H.name]}),n.jsx(S,{variant:"body2",color:"primary",children:"Danh sách nhóm sinh viên"}),n.jsx(n.Fragment,{children:a==null?void 0:a.map(oe=>n.jsx(S,{variant:"body2",color:"primary",children:oe.name}))})]}):null,children:y.label}),n.jsxs(ut,{children:[n.jsx(m,{sx:{mb:2},children:n.jsxs(m,{children:[n.jsxs(W,{disabled:T===0,onClick:v,sx:{mt:1,mr:1},children:[n.jsx(z,{icon:"eva:arrow-ios-back-fill",width:16}),"Quay lại"]}),T===N.length-1?n.jsxs(W,{variant:"contained",onClick:w,sx:{mt:1,mr:1},children:[n.jsx(z,{icon:"mingcute:save-line",width:16}),"Lưu thông tin"]}):n.jsxs(W,{variant:"contained",onClick:h,sx:{mt:1,mr:1},children:["Bước tiếp theo",n.jsx(z,{icon:"ic:baseline-navigate-next",width:16})]})]})}),n.jsx(m,{children:y.description})]})]},T)})}),s===N.length&&n.jsxs(Q,{square:!0,elevation:0,sx:{p:3},children:[n.jsx(S,{color:"success",children:"Phân công nhóm thành công"}),n.jsxs(W,{onClick:p,sx:{mt:1,mr:1},children:[n.jsx(z,{icon:"carbon:reset-alt",width:16}),"Phân công lại"]})]})]})})}export{Mt as default};
