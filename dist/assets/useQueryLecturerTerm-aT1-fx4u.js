import{aw as i,aM as A,ad as j,aj as I,aN as $,ao as k,ax as d,ay as T,bj as M,az as u}from"./index-NapbxlsL.js";import{u as Q}from"./useParams-vd7i9Ic6.js";const f=(s,t,c,a,n)=>{let m=a||"username",l=n||"";return i.get(`/api/v1/lecturer-terms/query?searchField=${m}&keywords=${l}&limit=${t}&page=${c}&termId=${s}`)},w=async(s,t)=>i.get(`/api/v1/lecturer-terms/to-adding?termId=${s}&majorId=${t}`),B=async s=>i.get(`api/v1/lecturer-terms/list?termId=${s}`),F=async s=>i.post("/api/v1/lecturer-terms",s),b=async(s,t)=>i.delete(`/api/v1/lecturer-terms?lecturerId=${s}&termId=${t}`),C=async(s,t)=>i.post("/api/v1/lecturer-terms/import",{termId:s,majorId:t}),D=()=>{const s=A(r=>r.lecturerSlice),{termStore:t}=j(),{majorStore:c}=I(),a=t.currentTerm.id,n=c.currentMajor.id,m=$(),{paramTotalPage:l}=s,{enqueueSnackbar:o}=k(),{getQueryField:e,setTotalPage:p}=Q(),h=()=>d(["getAllLectuerTermByParams",a,e("limit"),e("page"),e("searchField"),e("keywords")],()=>f(a,e("limit"),e("page"),e("searchField"),e("keywords")),{onSuccess(r){const g=r.params?r.params.totalPage:0;p(g),m(M(g))},staleTime:1e3*(60*15),keepPreviousData:!0,refetchInterval:1e3*(60*20)}),y=()=>d(["listLecturerTerms",a],()=>B(a),{}),v=()=>T(r=>b(r,t.currentTerm.id),{onSuccess:r=>{r.success===!0&&(o(r.message,{variant:"success"}),u.invalidateQueries(["getAllLectuerTermByParams",a,e("limit"),e("page"),e("searchField"),e("keywords")]),u.invalidateQueries(["lecturerTermsToAdd",t.currentTerm.id,c.currentMajor.id]))}}),L=()=>d(["lecturerTermsToAdd",a,n],()=>w(a,n),{enabled:!!a&&!!n,cacheTime:1e3*(60*1)}),P=()=>T(r=>F(r),{onSuccess(r){r.success===!0&&(o(r.message,{variant:"success"}),u.invalidateQueries(["getAllLectuerTermByParams",a,e("limit"),e("page"),e("searchField"),e("keywords")]),u.invalidateQueries(["lecturerTermsToAdd",t.currentTerm.id,c.currentMajor.id]))},onError(r){o(r.message,{variant:"error"})}}),S=()=>T(()=>C(t.currentTerm.id,c.currentMajor.id),{onSuccess(r){r.success&&(o("Cập nhật danh sách giảng viên thành công",{variant:"success"}),u.invalidateQueries(["getAllLectuerTermByParams",a,e("limit"),e("page"),e("searchField"),e("keywords")]),u.invalidateQueries(["lecturerTermsToAdd",t.currentTerm.id,c.currentMajor.id]))},onError(){o("Cập nhật danh sách giảng viên thất bại vui lòng thử lại sau",{variant:"error"})}});return{paramTotalPage:l.lecturerTerm,handleGetAllLecturerTermByParam:h,handleGetListLecturerTerms:y,handleLecturerTermsToAdd:L,onImportLecturerTerm:S,onDeleteLecturerTerm:v,onCreateLecturerTerm:P}};export{D as u};
